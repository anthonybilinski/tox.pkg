#!/usr/bin/make -f
# -*- makefile -*-

# Uncomment this to turn on verbose mode.
#export DH_VERBOSE=1

DPKG_EXPORT_BUILDFLAGS = 1
include /usr/share/dpkg/buildflags.mk

PROJECT    = tox
PREFIX     = /usr
LIBDIR     = $(PREFIX)/$(PROJECT)/lib
INCLUDEDIR = $(PREFIX)/$(PROJECT)/include

USER_CFLAGS  := -I$(INCLUDEDIR)
USER_LDFLAGS := -L$(LIBDIR)

override_dh_auto_configure:
	/bin/true

override_dh_auto_build:
	make USER_CFLAGS="$(USER_CFLAGS)" USER_LDFLAGS="$(USER_LDFLAGS)"

override_dh_auto_test:
	/bin/true

override_dh_auto_install:
	install -D -m755 tuntox debian/tmp/usr/bin/tuntox

override_dh_strip:
	dh_strip --dbg-package=tuntox-dbg

override_dh_shlibdeps:
	LD_LIBRARY_PATH=$(LD_LIBRARY_PATH):$(LIBDIR) dh_shlibdeps

%:
	dh $@ --parallel
